<!doctype html>
<html class="no-js" lang=""><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Accessing the Local Database - Inkdrop</title><meta name="description" content="The Notebook for Hackers"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="shortcut icon" href="//inkdrop-prod.s3.amazonaws.com/site/favicon@2x.png"/><link rel="mask-icon" href="//inkdrop-prod.s3.amazonaws.com/site/favicon.svg" color="rgb(17, 20, 24)"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,400,700|Lato:300,400"/><link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjapanese.css"/><script src="/app.js?1479115886879"></script></head><body><div id="app"><div data-reactid=".1mswnzda6zg" data-react-checksum="-2039733619"><header class="app--header" data-reactid=".1mswnzda6zg.0"><div class="ui container" data-reactid=".1mswnzda6zg.0.0"><div class="ui grid" data-reactid=".1mswnzda6zg.0.0.0"><div class="row" data-reactid=".1mswnzda6zg.0.0.0.0"><a href="https://inkdrop.info/" class="app--logo" data-reactid=".1mswnzda6zg.0.0.0.0.0"><img src="//inkdrop-prod.s3.amazonaws.com/site/header-logo@2x.png" width="196" height="45" alt="logo" data-reactid=".1mswnzda6zg.0.0.0.0.0.0"/></a><ul class="app--navbar reset-list un-select" data-reactid=".1mswnzda6zg.0.0.0.0.1"><li data-reactid=".1mswnzda6zg.0.0.0.0.1.0"><a href="/" data-reactid=".1mswnzda6zg.0.0.0.0.1.0.0">Docs</a></li><li data-reactid=".1mswnzda6zg.0.0.0.0.1.1"><a href="https://inkdrop.info/login" data-reactid=".1mswnzda6zg.0.0.0.0.1.1.0">Login</a></li></ul></div></div></div></header><div class="ui container main-content" data-reactid=".1mswnzda6zg.1"><div class="ui stackable grid" data-reactid=".1mswnzda6zg.1.0"><div class="four wide column" data-reactid=".1mswnzda6zg.1.0.0"><div data-reactid=".1mswnzda6zg.1.0.0.0"><h3 class="ui header" data-reactid=".1mswnzda6zg.1.0.0.0.0">Using Inkdrop</h3><ul class="article-list" data-reactid=".1mswnzda6zg.1.0.0.0.1"><li data-reactid=".1mswnzda6zg.1.0.0.0.1.0"><a href="/manual/quick-start-guide" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.0.0">Quick start guide</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.1"><a href="/manual/basic-usage" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.1.0">Basic usage</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.2"><a href="/manual/writing-note" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.2.0">Writing note</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.3"><a href="/manual/searching-notes" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.3.0">Searching notes</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.4"><a href="/manual/managing-tasks-with-status" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.4.0">Managing tasks with status</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.5"><a href="/manual/synchronizing-in-the-cloud" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.5.0">Synchronizing in the cloud</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.6"><a href="/manual/extend-inkdrop-with-plugins" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.6.0">Extend Inkdrop with plugins</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.7"><a href="/manual/recovering-your-password" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.7.0">Recovering your password</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.8"><a href="/manual/working-behind-a-corporate-web-proxy" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.8.0">Working behind web proxy</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.1.9"><a href="/manual/backing-up-your-data" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.1.9.0">Backing up your data</a></li></ul><h3 class="ui header" data-reactid=".1mswnzda6zg.1.0.0.0.2">Hacking Inkdrop</h3><ul class="article-list" data-reactid=".1mswnzda6zg.1.0.0.0.3"><li data-reactid=".1mswnzda6zg.1.0.0.0.3.0"><a href="/manual/accessing-data-in-the-cloud" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.0.0">Accessing Data in the Cloud</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.3.1"><a href="/manual/creating-a-theme" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.1.0">Creating a Theme</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.3.2"><a href="/manual/plugin-word-count" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.2.0">Plugin: Word Count</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.3.3"><a href="/manual/flux-architecture" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.3.0">Flux Architecture</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.3.4"><a href="/manual/accessing-the-local-database" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.4.0">Accessing the Local Database</a></li><li data-reactid=".1mswnzda6zg.1.0.0.0.3.5"><a href="/manual/customizing-the-editor" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.3.5.0">Customizing the Editor</a></li></ul><h3 class="ui header" data-reactid=".1mswnzda6zg.1.0.0.0.4">Appendix</h3><ul class="article-list" data-reactid=".1mswnzda6zg.1.0.0.0.5"><li data-reactid=".1mswnzda6zg.1.0.0.0.5.0"><a href="/manual/markdown-cheatsheet" class=" " data-reactid=".1mswnzda6zg.1.0.0.0.5.0.0">Markdown Cheatsheet</a></li></ul></div></div><div class="twelve wide column doc-content" data-reactid=".1mswnzda6zg.1.0.1"><div class="ui breadcrumb" data-reactid=".1mswnzda6zg.1.0.1.0"><a href="/" class="section" data-reactid=".1mswnzda6zg.1.0.1.0.0">Docs</a><i class="right chevron icon divider" data-reactid=".1mswnzda6zg.1.0.1.0.1"></i><a href="/manual/" class="section" data-reactid=".1mswnzda6zg.1.0.1.0.2">Inkdrop Manual</a><i class="right chevron icon divider" data-reactid=".1mswnzda6zg.1.0.1.0.3"></i><div class="active section" data-reactid=".1mswnzda6zg.1.0.1.0.4">Accessing the Local Database</div></div><div class="ui divider" data-reactid=".1mswnzda6zg.1.0.1.1"></div><h1 data-reactid=".1mswnzda6zg.1.0.1.2:0">Accessing the Local Database</h1><div data-reactid=".1mswnzda6zg.1.0.1.2:1"><p>There are two databases in local and on remote and they sync via HTTP(S).
The remote database provides API compatible with CouchDB. You can access your data in the remote database directly with the API as described in the section of <a href="/manual/accessing-data-in-the-cloud">Accessing Data in the Cloud</a>.
The Inkdrop client app is built on top of a <a href="https://pouchdb.com/">PouchDB</a> for storing data in local and syncing with the remote database. For many parts of the application, the database is the source of truth. Data is written to the local database first, then synced via the API, and changes to the database trigger Actions, Stores and components to refresh their contents. The illustration below shows this flow of data:</p>
<p><img class="ui image" src="/manual/2-5-accessing-the-database_data-flow.png" title="" alt="Data flow" /></p>
<h2><a name="accessing-the-pouchdb-instance" class="anchor" href="#accessing-the-pouchdb-instance"><i class="linkify icon"></i></a>Accessing the PouchDB instance</h2><p>Inkdrop is built with <a href="http://electron.atom.io/">Electron</a>, an instance of the PouchDB is living inside <a href="https://github.com/electron/electron/blob/master/docs/tutorial/quick-start.md#main-process">Main Process</a>. Electron&#39;s <a href="https://github.com/electron/electron/blob/master/docs/api/remote.md">remote module</a> provides 
 a simple way to do inter-process communication (IPC) between the renderer process (web page) and the main process. Using this IPC, you can access the PocuDB like this:</p>
<pre><code class="lang-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDatabaseInfo</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> { app } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>).remote;
  <span class="hljs-keyword">const</span> info = <span class="hljs-keyword">await</span> app.db.local.info();
  <span class="hljs-built_in">console</span>.log(info.db_name);
}
</code></pre>
<p>In this code, <code>app.db.local</code> is the instance of PouchDB.</p>
<div class="ui info message">
<strong>NOTE</strong>: Returned objects from the database represent <a href="https://github.com/electron/electron/blob/master/docs/api/remote.md#remote-objects">Remote Objects</a>.
</div>

</div><div data-reactid=".1mswnzda6zg.1.0.1.3"><h2 data-reactid=".1mswnzda6zg.1.0.1.3.0">Can you help us improve these docs?</h2><p data-reactid=".1mswnzda6zg.1.0.1.3.1"><span data-reactid=".1mswnzda6zg.1.0.1.3.1.0">The source of these docs is </span><a href="https://github.com/inkdropapp/docs" data-reactid=".1mswnzda6zg.1.0.1.3.1.1">here</a><span data-reactid=".1mswnzda6zg.1.0.1.3.1.2"> on GitHub. If you see a way these docs can be improved, please fork us!</span></p></div></div></div></div><footer class="app--footer" data-reactid=".1mswnzda6zg.2"><div class="app--footer-content ui container" data-reactid=".1mswnzda6zg.2.0"><div class="ui stackable grid" data-reactid=".1mswnzda6zg.2.0.0"><div class="thirteen wide column links" data-reactid=".1mswnzda6zg.2.0.0.0"><ul class="links" data-reactid=".1mswnzda6zg.2.0.0.0.0"><li data-reactid=".1mswnzda6zg.2.0.0.0.0.0"><a href="/terms" data-reactid=".1mswnzda6zg.2.0.0.0.0.0.0">Terms of Use</a></li><li data-reactid=".1mswnzda6zg.2.0.0.0.0.1"><a href="/privacy" data-reactid=".1mswnzda6zg.2.0.0.0.0.1.0">Privacy Policy</a></li><li data-reactid=".1mswnzda6zg.2.0.0.0.0.2"><a href="/faq" data-reactid=".1mswnzda6zg.2.0.0.0.0.2.0">FAQ</a></li><li data-reactid=".1mswnzda6zg.2.0.0.0.0.3"><a href="mailto:inkdrop@pkpk.info" data-reactid=".1mswnzda6zg.2.0.0.0.0.3.0">Contact</a></li><li data-reactid=".1mswnzda6zg.2.0.0.0.0.4"><a href="https://twitter.com/inkdrop_app" target="_blank" data-reactid=".1mswnzda6zg.2.0.0.0.0.4.0">Twitter</a></li><li data-reactid=".1mswnzda6zg.2.0.0.0.0.5"><a href="https://medium.com/@inkdrop" target="_blank" data-reactid=".1mswnzda6zg.2.0.0.0.0.5.0">Blog</a></li></ul></div><div class="three wide column text-left" data-reactid=".1mswnzda6zg.2.0.0.1"><a href="http://odoruinu.net/" target="_blank" data-reactid=".1mswnzda6zg.2.0.0.1.0">Â© Takuya Matsuyama</a></div></div></div></footer></div></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='https://www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-58709134-3','auto');</script></body></html>